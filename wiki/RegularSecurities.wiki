# Regular & Closed Securities

= Introduction =

The securities registered in KRX might have been changed.
It might be closed or changed.

So. we need to search regular security list in specific date.

= Details =

1. 증권 거래일 결정
   KRX 상장 종목 검색을 기준으로 진행
   대표종목 (삼성전자)에 대해서, 19990101 부터 금일(20140324)까지 일자별 검색을 진행하고,
   검색결과가 있는 날인 경우, WORK DAY로 산정
   
2. 기준 증권 종목의 결정
   KRX 상장 종목 검색에서 WORK DAY를 기준으로 조회하였을 경우, 
   1. ID 가 추가된 경우, 신규 종목으로 식별하고, 추가.
   2. NAME이 변경된 경우, 변경 종목으로 식별하고, 변경 내용 추가.
   3. 기준 종목에 나타나지 않는 경우, 
      페기 종목에서 검색을 하여, 발견하는 경우, 해당 종목 CLOSE_YN 여부를 Check 하여, 추가
      검색 결과가 없는 경우, 해당 종목은 거래 정지 상태로 보고, 저장하지 않음

3. 일자별 기준 증권 종목 검색 방법
   폐지된 일자로 CLOSE_YN = Y 인 ROW가 해당 종목에 추가 됨
   즉. 검색일 기준 최종 ROW의 CLOSE_YN 여부가 폐지 여부가 됨
   
  SELECT * FROM TB_COMPANY A JOIN (
  SELECT STOCK_ID, MAX(STANDARD_DATE) STANDARD_DATE FROM TB_COMPANY #검색일자전 최종 기준일자를 가지고 옴
  WHERE  STANDARD_DATE <= '20140324' # SPECIFIC DATE
  GROUP BY STOCK_ID ) B USING ( STOCK_ID, STANDARD_DATE)